<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tip 174 - Machine Learning with ML.NET and Azure Functions - Part 1 of 2 | Azure Tips and Tricks</title>
    <meta name="description" content="">
    <link rel="apple-touch-icon" sizes="57x57" href="/AzureTipsAndTricks/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/AzureTipsAndTricks/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/AzureTipsAndTricks/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/AzureTipsAndTricks/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/AzureTipsAndTricks/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/AzureTipsAndTricks/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/AzureTipsAndTricks/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/AzureTipsAndTricks/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/AzureTipsAndTricks/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/AzureTipsAndTricks/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/AzureTipsAndTricks/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/AzureTipsAndTricks/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/AzureTipsAndTricks/favicon-16x16.png">
  <link rel="manifest" href="/AzureTipsAndTricks/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <script async="true" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    
    <link rel="preload" href="/AzureTipsAndTricks/assets/css/0.styles.9e4235cc.css" as="style"><link rel="preload" href="/AzureTipsAndTricks/assets/js/app.5b14cfc5.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/4.1e17da4f.js" as="script"><link rel="preload" href="/AzureTipsAndTricks/assets/js/87.5749219e.js" as="script"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/10.e20fc808.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/100.264adb54.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/101.39ea5367.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/102.21980ae6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/103.197ed1a1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/104.d2357d97.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/105.f465a04b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/106.0864d674.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/107.5a55c440.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/108.e32be294.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/109.dc8c5c3a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/11.0969bd96.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/110.df125ac6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/111.48a7996e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/112.aa469563.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/113.91c4e6e0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/114.527781d5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/115.e9a886a5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/116.16663ad2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/117.b162b4c6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/118.9b50ef92.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/119.0a8b370a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/12.1f822cc4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/120.ced751a3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/121.c86238c7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/122.b2625d3d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/123.169fc187.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/124.6f67e472.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/125.b760af49.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/126.72bc9d4b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/127.8b1e4ad2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/128.9f2b7bf7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/129.03167ff1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/13.09039547.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/130.f914d526.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/131.9d51139d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/132.2014a0e4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/133.bfd99217.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/134.25a4a65a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/135.ab081946.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/136.0468da0a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/137.f8eb83f6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/138.e915a26c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/139.6c552096.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/14.13477158.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/140.e9443cfe.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/141.c14ff0d9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/142.67e0cc28.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/143.09650d89.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/144.7b49aec9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/145.b85272c4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/146.466f5d4a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/147.db668cf1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/148.5194f456.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/149.b56476cc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/15.b8c48aed.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/150.44981e01.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/151.646cf4f0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/152.96b0eb85.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/153.85271889.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/154.734fd565.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/155.0f8cc981.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/156.49ab320f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/157.7cda0435.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/158.6c4e3adc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/159.1d739f2b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/16.ae537168.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/160.7e9b9da0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/161.b50cbaf9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/162.6ab133f0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/163.e1a8e976.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/164.cdb26171.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/165.1069e5cd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/166.1161cb3a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/167.5c8cd148.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/168.70577b69.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/169.5b254c14.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/17.10d72c20.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/170.8f7fcc17.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/171.16e2ee2d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/172.3eafce56.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/173.eff05407.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/174.d51271c6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/175.ea3f88e2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/176.4bd433bf.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/177.1e65fcd2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/178.e73b2493.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/179.ff7b5416.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/18.fb2ff9f6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/180.5480508d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/181.10dc3d80.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/182.fe037e74.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/183.5a8ed3b0.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/184.7edd2d06.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/185.0846bd77.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/186.93679358.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/187.57db7200.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/188.a04f2c1e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/189.4ff4f63d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/19.95ced711.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/190.9e7794cb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/191.aa789a04.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/192.d0bd14f6.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/193.c2cd2d5e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/194.6a0e948b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/195.403f2adc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/196.64309b8e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/197.3468718a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/20.f31cfd81.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/21.12da7ea1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/22.4f39bb03.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/23.2a607bda.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/24.e111cadc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/25.0c7409c8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/26.0a85da7a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/27.3f96c833.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/28.a0a3352f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/29.7f4a8583.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/3.5ca0f648.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/30.1247d7f4.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/31.3f6db054.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/32.5e5c2357.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/33.8fc2a961.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/34.57efcf89.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/35.a569aa43.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/36.f27d2d57.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/37.8b4a6c86.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/38.9ca06ca3.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/39.6b011c13.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/40.9b0a861f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/41.6d713e4c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/42.dffc94dc.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/43.4436a00f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/44.85ca4d82.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/45.dba3d3d2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/46.27ef5188.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/47.f17fc0b5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/48.8c70d5b5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/49.62f55a0a.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/5.b32c499c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/50.35f57715.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/51.c69fb36e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/52.ff9f17b7.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/53.83a2fbb5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/54.02c278ee.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/55.b9054605.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/56.7706c795.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/57.9bd500f8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/58.6d46fd3f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/59.f128bcd9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/6.c702ed47.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/60.6de219cb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/61.0f3675f9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/62.dca43451.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/63.cf6b995f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/64.7069a086.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/65.3ba52b06.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/66.1ac63565.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/67.a187df63.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/68.80620960.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/69.f50fdc21.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/7.ee00b141.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/70.46b99c4f.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/71.c5999d26.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/72.65ed9261.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/73.4233e0b2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/74.b0c0f4fb.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/75.54ac56a9.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/76.05fe560b.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/77.96811d6d.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/78.90a51450.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/79.1236e82c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/8.b78eefc1.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/80.a592e596.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/81.56ae99cd.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/82.55284008.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/83.db2d03ed.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/84.8cfcd558.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/85.89e615c8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/86.7a725b31.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/88.dac80eac.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/89.9b15e39e.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/9.45188c19.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/90.599a96a5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/91.0ff6aba8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/92.abf4d0c2.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/93.964c64a8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/94.33e7546c.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/95.a94dfc07.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/96.829282e5.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/97.4f43de11.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/98.a7e06b22.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/99.88852ce8.js"><link rel="prefetch" href="/AzureTipsAndTricks/assets/js/vendors~docsearch.9a8918f9.js">
    <link rel="stylesheet" href="/AzureTipsAndTricks/assets/css/0.styles.9e4235cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/AzureTipsAndTricks/" class="home-link router-link-active"><img src="/AzureTipsAndTricks/files/vintage.png" alt="Azure Tips and Tricks" class="logo"> <span class="site-name can-hide">Azure Tips and Tricks</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/AzureTipsAndTricks/#site-map" class="nav-link">eBooks</a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/AzureTipsAndTricks/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/AzureTipsAndTricks/#site-map" class="nav-link">eBooks</a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/microsoft/azuretipsandtricks" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/" class="sidebar-link">Welcome</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Tips</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Recently Added</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>App Service</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Authentication</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>AzCopy</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CLI</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cloud Shell</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Cognitive Services</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/AzureTipsAndTricks/blog/tip70.html" class="sidebar-link">Tip 70 - Key Phrase Extraction with Cognitive Service and Azure</a></li><li><a href="/AzureTipsAndTricks/blog/tip71.html" class="sidebar-link">Tip 71 - Language Detection with Cognitive Service and Azure</a></li><li><a href="/AzureTipsAndTricks/blog/tip72.html" class="sidebar-link">Tip 72 - Sentiment Analysis with Cognitive Service and Azure</a></li><li><a href="/AzureTipsAndTricks/blog/tip129.html" class="sidebar-link">Tip 129 - Using OCR to extract text from images from the Azure Portal</a></li><li><a href="/AzureTipsAndTricks/blog/tip154.html" class="sidebar-link">Tip 154 - How to quickly check the EndPoint API of QnA Maker</a></li><li><a href="/AzureTipsAndTricks/blog/tip174.html" class="active sidebar-link">Tip 174 - Machine Learning with ML.NET and Azure Functions - Part 1 of 2</a></li><li><a href="/AzureTipsAndTricks/blog/tip175.html" class="sidebar-link">Tip 175 - Machine Learning with ML.NET and Azure Functions - Part 2 of 2</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Containers</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Cosmos DB</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>DevOps</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Functions</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>HD Insight</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>iOS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>IoT</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Key Vault</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Logic Apps</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Machine Learning</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Media Services</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Portal</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>PowerShell</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Productivity</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SAP</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SDKs</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SendGrid</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SignalR</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SQL</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Storage</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Virtual Machines</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>VNET</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page" data-v-0e4468e2> <div class="content default" data-v-0e4468e2><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>💡 Learn more : <a href="https://dotnet.microsoft.com/apps/machinelearning-ai/ml-dotnet?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">ML.NET Overview<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <h4 id="azure-tips-and-tricks-part-174-machine-learning-with-ml-net-and-azure-functions-part-1-of-2"><a href="#azure-tips-and-tricks-part-174-machine-learning-with-ml-net-and-azure-functions-part-1-of-2" aria-hidden="true" class="header-anchor">#</a> Azure Tips and Tricks Part 174 - Machine Learning with ML.NET and Azure Functions - Part 1 of 2</h4> <h4 id="intro"><a href="#intro" aria-hidden="true" class="header-anchor">#</a> Intro</h4> <p>Machine learning can be tricky. Fortunately, Azure is coming up with ways to make it easier for developers to jump into machine learning. <a href="https://azure.microsoft.com/en-us/updates/ml-net?WT.mc_id=azure-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">ML.NET<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is the machine learning framework that Microsoft Research made just for .NET developers so you can do everything inside Visual Studio. If you haven’t already been playing with it, I think you’re going to love it. And when you are ready to deploy your ML.NET algorithm, you can use serverless architecture through <a href="https://azure.microsoft.com/en-us/services/functions?WT.mc_id=azure-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure Functions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>— the “don’t worry about it” option when you want to get an app up and running but don’t necessarily want to mess around with servers and containers.</p> <h4 id="serverless-machine-learning"><a href="#serverless-machine-learning" aria-hidden="true" class="header-anchor">#</a> Serverless Machine Learning</h4> <p>This is <a href="/AzureTipsAndTricks/blog/tip174/">part 1</a> of a <a href="/AzureTipsAndTricks/blog/tip175/">two part</a> post on ML.NET inspired by Luis Quintanilla’s <a href="http://luisquintanilla.me/2018/08/21/serverless-machine-learning-mlnet-azure-functions/" target="_blank" rel="noopener noreferrer">article<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> about using ML.NET with Azure Functions, where he took these two great ideas and combined them. You will use ML.NET locally to train your machine learning model. Then you will create an Azure environment with a storage account and Azure Function to host your machine learning app. The final step, building an app that uses your model, will be covered in the next post.</p> <h4 id="create-your-model"><a href="#create-your-model" aria-hidden="true" class="header-anchor">#</a> Create your model</h4> <p>For the ML.NET portion of this quick project, let’s build the iris categorization model from the <a href="https://www.microsoft.com/net/learn/machine-learning-and-ai/get-started-with-ml-dotnet-tutorial?WT.mc_id=microsoft-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Getting started in 10 minutes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ML.NET tutorial. As a prerequisite, you’ll want to install <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure CLI 2.0<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,  <a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure Functions Core Tools<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and a recent version of <a href="https://www.microsoft.com/net/download/dotnet-core/2.2?WT.mc_id=microsoft-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">.NET Core<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <img src="/AzureTipsAndTricks/files/iris-machinelearning.png"> <p>Open a command prompt and create a new folder for your ML.NET project.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; mkdir demo
&gt; cd demo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Next, create a new solution as well as a new console project and install the ML.NET package.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; dotnet new solution
&gt; dotnet new console -o model
&gt; dotnet sln add model/model.csproj
&gt; cd model
&gt; dotnet add package Microsoft.ML --version 0.4.0
&gt; dotnet restore
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Create a data directory under model.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; mkdir data
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Open the <a href="https://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data" target="_blank" rel="noopener noreferrer">UCI Machine Learning Repository: Iris Data Set<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, copy and paste the data into VS Code, or TextEdit or Notepad, and save it as <strong>iris-data.txt</strong> in the <strong>data</strong> directory.
Now it’s time to write some code. Open up your project in Visual Studio Code and create a couple of data structure classes: <strong>IrisData.cs</strong> and <strong>IrisPrediction.cs</strong>.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
using Microsoft.ML.Runtime.Api;

        public class IrisData
        {
            [Column(&quot;0&quot;)]
            public float SepalLength;

            [Column(&quot;1&quot;)]
            public float SepalWidth;

            [Column(&quot;2&quot;)]
            public float PetalLength;

            [Column(&quot;3&quot;)]
            public float PetalWidth;

            [Column(&quot;4&quot;)]
            [ColumnName(&quot;Label&quot;)]
            public string Label;
        }

        public class IrisPrediction
        {
            [ColumnName(&quot;PredictedLabel&quot;)]
            public string PredictedLabels;
        }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>Add a <strong>model</strong> class to perform the machine learning training.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>using System.Threading.Tasks;
using Microsoft.ML;
using Microsoft.ML.Data;
using Microsoft.ML.Trainers;
using Microsoft.ML.Transforms;

    class Model
    {
        public static async Task&lt;PredictionModel&lt;IrisData, IrisPrediction&gt;&gt; Train(LearningPipeline pipeline, string dataPath, string modelPath)
        {
            // Load Data
            pipeline.Add(new TextLoader(dataPath).CreateFrom&lt;IrisData&gt;(separator: ','));

            // Transform Data
            // Assign numeric values to text in the &quot;Label&quot; column, because
            // only numbers can be processed during model training
            pipeline.Add(new Dictionarizer(&quot;Label&quot;));

            // Vectorize Features
            pipeline.Add(new ColumnConcatenator(&quot;Features&quot;, &quot;SepalLength&quot;, &quot;SepalWidth&quot;, &quot;PetalLength&quot;, &quot;PetalWidth&quot;));

            // Add Learner
            pipeline.Add(new StochasticDualCoordinateAscentClassifier());

            // Convert Label back to text
            pipeline.Add(new PredictedLabelColumnOriginalValueConverter() { PredictedLabelColumn = &quot;PredictedLabel&quot; });

            // Train Model
            var model = pipeline.Train&lt;IrisData, IrisPrediction&gt;();

            // Persist Model
            await model.WriteAsync(modelPath);

            return model;
        }
    }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>Place your logic inside the Program.cs file to run through the process:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    class Program
    {
        static void Main(string[] args)
        {
            string dataPath = &quot;/Users/mbcrump/Documents/demo/model/data/iris-data.txt&quot;;

            string modelPath = &quot;/Users/mbcrump/Documents/demo/model/model.zip&quot;;

            var model = Model.Train(new LearningPipeline(), dataPath, modelPath).Result;

            // Test data for prediction
            var prediction = model.Predict(new IrisData()
            {
                SepalLength = 3.3f,
                SepalWidth = 1.6f,
                PetalLength = 0.2f,
                PetalWidth = 5.1f
            });

            Console.WriteLine($&quot;Predicted flower type is: {prediction.PredictedLabels}&quot;);

        }
    }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>Run the model project to create a new <strong>model.zip</strong> file in your root directory. Below is the results that I got.</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>Michaels-MacBook-Pro:model mbcrump$ dotnet run
Automatically adding a MinMax normalization transform, use 'norm=Warn' or 'norm=No' to turn this behavior off.
Using 4 threads to train.
Automatically choosing a check frequency of 4.
Auto-tuning parameters: maxIterations = 9996.
Auto-tuning parameters: L2 = 2.668802E-05.
Auto-tuning parameters: L1Threshold (L1/L2) = 0.
Using best model from iteration 500.
Not training a calibrator because it is not needed.
Predicted flower type is: Iris-virginica
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Congratulations! You’ve trained a machine learning model with ML.NET that categorizes irises.</p> <h4 id="set-up-your-azure-environment-using-cloud-shell"><a href="#set-up-your-azure-environment-using-cloud-shell" aria-hidden="true" class="header-anchor">#</a> Set up your Azure environment using Cloud Shell</h4> <p>We'll use Azure Cloud Shell which uses the <a href="https://docs.microsoft.com/cli/azure/?view=azure-cli-latest?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to set up our Azure environment. The easiest way to do this is to sign in to your Azure portal account and click on the <strong>cloud shell icon</strong>  shown below to open a bash shell or go to <a href="http://shell.azure.com" target="_blank" rel="noopener noreferrer">shell.azure.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <img src="/AzureTipsAndTricks/files/cloudshell.PNG"> <p>Once logged in, create a new resource group for this project in the bash shell (and replace “mlnetdemo” as well as the location with one of your own).</p> <p><code>$ az group create --name mlnetdemo --location westus</code></p> <p>Add storage to this resource group.</p> <p>NOTE: You'll have to change the name below to something unique</p> <p><code>$ az storage account create --name mlnetdemostorage --location westus --resource-group mlnetdemo --sku Standard_LRS</code></p> <p>Create your Azure Function and configure it to use the beta runtime which supports .NET Core.</p> <p>NOTE: You'll have to change the name below to something unique</p> <p><code>$ az functionapp create --name mlnetdemoazfunction1 --storage-account mlnetdemostorage1 --consumption-plan-location westus --resource-group mlnetdemo</code></p> <p><code>$ az functionapp config appsettings set --name mlnetdemoazfunction1 --resource-group mlnetdemo --settings FUNCTIONS_EXTENSION_VERSION=beta</code></p> <h4 id="deploy-your-machine-learning-model"><a href="#deploy-your-machine-learning-model" aria-hidden="true" class="header-anchor">#</a> Deploy your machine learning model</h4> <p>To get your model up to the server, you will need to get the keys to your storage account. Use the following command in the bash window to get it.</p> <p><code>$ az storage account keys list --account-name mlnetdemostorage1 --resource-group mlnetdemo</code></p> <p>You'll see the following:</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>[
  {
    &quot;keyName&quot;: &quot;key1&quot;,
    &quot;permissions&quot;: &quot;Full&quot;,
    &quot;value&quot;: &quot;YOURKEY&quot;
  },
  {
    &quot;keyName&quot;: &quot;key2&quot;,
    &quot;permissions&quot;: &quot;Full&quot;,
    &quot;value&quot;: &quot;NONEYOBUSINESS&quot;
  }
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Use the following command to create a new directory called <code>models</code> to put your model in using your account key (this can be found in the navigation window under <strong>Settings | Access keys</strong>).</p> <p><code>$ az storage container create --name models --account-key YOURKEY --account-name mlnetdemostorage1</code></p> <img src="/AzureTipsAndTricks/files/blob_model.png"> <p>Since we are using Cloud Shell, it will be easier to use the Azure Portal for this step. You can also use the Azure CLI if you wish.  Browse to your version of the <strong>mlnetdemo</strong> resource group and drill down to your storage resource that you created earlier. Drill into the blobs and you see the new folder <code>models</code> subdirectory. Upload the <strong>model.zip</strong> here which can be found on your hard drive.</p> <p>In part 2 (coming tomorrow), we’ll look at building an app hosted by your Azure Function that will run images against your iris categorizer.</p></div> <div class="page-edit" data-v-0e4468e2><div class="edit-link" data-v-0e4468e2><a href="https://github.com/microsoft/azuretipsandtricks/edit/master/blog/tip174.md" target="_blank" rel="noopener noreferrer" data-v-0e4468e2>Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-0e4468e2 data-v-0e4468e2><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <section class="share" data-v-0e4468e2><h2 data-v-0e4468e2>Share</h2> <a href="https://twitter.com/intent/tweet?text=Tip 174 - Machine Learning with ML.NET and Azure Functions - Part 1 of 2 by @mbcrump http://azuredev.tips/blog/tip174.html" target="_blank" class="share__button" data-v-0e4468e2><i class="fab fa-twitter" data-v-0e4468e2></i> Tweet
    </a></section></div> <!----></div> <div class="page-nav" data-v-0e4468e2><p class="inner" data-v-0e4468e2><span class="prev" data-v-0e4468e2>
        ←
        <a href="/AzureTipsAndTricks/blog/tip154.html" class="prev" data-v-0e4468e2>
          Tip 154 - How to quickly check the EndPoint API of QnA Maker
        </a></span> <span class="next" data-v-0e4468e2><a href="/AzureTipsAndTricks/blog/tip175.html" data-v-0e4468e2>
          Tip 175 - Machine Learning with ML.NET and Azure Functions - Part 2 of 2
        </a>
        →
      </span></p></div> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/AzureTipsAndTricks/assets/js/app.5b14cfc5.js" defer></script><script src="/AzureTipsAndTricks/assets/js/4.1e17da4f.js" defer></script><script src="/AzureTipsAndTricks/assets/js/87.5749219e.js" defer></script>
  </body>
</html>
